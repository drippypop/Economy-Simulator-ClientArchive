(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{76:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return r(909)}])},1107:function(e,n,r){"use strict";var t=r(5893),i=r(4245),a=r(7989),o=(0,i.QM)({image:{display:"block",margin:"0 auto",width:"100%",maxWidth:"160px",height:"auto"}});n.Z=function(e){o();return(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)(a.Z,{type:2})})})}},2918:function(e,n,r){"use strict";var t=r(5893),i=r(7294),a=r(4245),o=(r(465),r(9125)),s=r(1747),l=(0,a.QM)({image:{maxWidth:"400px",width:"100%",margin:"0 auto",height:"auto",display:"block"}});n.Z=function(e){var n=l(),r=(e.size,(0,i.useState)(0)),a=r[0],c=r[1],d=s.Z.useContainer(),u=(0,i.useState)(e.url?e.url:d.getUserThumbnail(e.id,"420x420")),f=u[0],h=u[1];return(0,i.useEffect)((function(){e.url?h(e.url):(c(0),h(d.getUserThumbnail(e.id,"420x420")))}),[e]),(0,i.useEffect)((function(){e.url||h(d.getUserThumbnail(e.id,"420x420"))}),[d.thumbnails]),(0,t.jsx)("img",{className:n.image,src:f,alt:e.name,onError:function(e){a>=3||((0,o.a)({errorEvent:e,type:"playerHeadshot",src:f}),c(a+1),h("/img/placeholder.png"))}})}},2969:function(e,n,r){"use strict";var t=r(5893),i=r(7484),a=r.n(i),o=r(2069),s=r(8452);n.Z=function(e){var n=e.lastLocation;return a()(e.lastOnline).isAfter(a()().subtract(5,"minutes"))?"Playing"===n?(0,t.jsx)("div",{children:(0,t.jsx)(s.Z,{href:(0,o.IH)({placeId:e.placeId,name:"-"}),children:(0,t.jsx)("a",{children:(0,t.jsx)("span",{className:"avatar-status friend-status icon-game",title:"Playing"})})})}):"Website"===n?(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"avatar-status friend-status icon-online",title:"Website"})}):"Studio"===n?(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"avatar-status friend-status icon-studio",title:"Developing"})}):null:null}},2611:function(e,n,r){"use strict";function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(n,{k:function(){return o}});var a={redirects:1,feed:1},o={group:a,info:function(e,n){for(var r=arguments.length,t=new Array(r>2?r-2:0),o=2;o<r;o++)t[o-2]=arguments[o];var s;if("undefined"===typeof a[e])throw new Error("Undefined log group: "+e);if(!(10<a[e]))return(s=console).log.apply(s,["[logger.info]",a[e],n].concat(i(t)))},warn:function(e,n){for(var r=arguments.length,t=new Array(r>2?r-2:0),o=2;o<r;o++)t[o-2]=arguments[o];var s;if("undefined"===typeof a[e])throw new Error("Undefined log group: "+e);10<a[e]||(s=console).warn.apply(s,["[logger.warn]",e,n].concat(i(t)))},err:function(e,n){for(var r=arguments.length,t=new Array(r>2?r-2:0),a=2;a<r;a++)t[a-2]=arguments[a];var o;(o=console).error.apply(o,["[logger.err]",e,n].concat(i(t)))}}},909:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return F},default:function(){return M}});var t=r(5893),i=r(7294),a=r(4245),o=r(2300),s=r(7918),l=r(2069),c=r(8586),d=r(5435),u=(r(4914),r(1107)),f=(r(2269),r(6063)),h=r(9767),p=r(3633),m=r(7484),x=r.n(m),g=r(2918),v=r(2969),y=r(8305),b=r(5544);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function j(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return w(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=(0,y.f)((function(){var e=(0,i.useState)(null),n=e[0],r=e[1],t=(0,i.useState)(null),a=t[0],o=t[1];return(0,i.useEffect)((function(){n&&!a&&(0,b.M)({userIds:n.map((function(e){return e.id}))}).then((function(e){var t={},i=!0,a=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var d=l.value;t[d.userId]=d}}catch(f){a=!0,s=f}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}o(t);var u=n.sort((function(e,n){var r=x()(t[e.id].lastOnline),i=x()(t[n.id].lastOnline);return r.isAfter(i)?-1:r.isSame(i)?0:1}));r(j(u))})).catch((function(e){console.error("[error] friends err",e)}))}),[n,a]),{friends:n,setFriends:r,friendStatus:a,setFriendStatus:o}})),N=r(8452);function E(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function O(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){E(e,n,r[n])}))}return e}var I=(0,a.QM)({friendEntry:{paddingLeft:"10px",paddingRight:"10px",maxWidth:"100px",overflow:"hidden"},thumbnailWrapper:{maxWidth:"85px",borderRadius:"100%",border:"1px solid #c3c3c3",overflow:"hidden",boxShadow:"0 1px 3px rgb(150 150 150 / 74%)",margin:"0 auto",display:"block",width:"100%"},username:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",textAlign:"center",marginBottom:0,width:"100%",marginTop:"4px",fontSize:"15px",fontWeight:500,color:"#4a4a4a"},activityWrapper:{float:"right",marginTop:"-26px",zIndex:2,position:"relative"}}),A=function(e){var n=S.useContainer(),r=n.friendStatus&&n.friendStatus[e.id],i=I();return(0,t.jsx)("div",{className:i.friendEntry,children:(0,t.jsx)(N.Z,{href:"/users/".concat(e.id,"/profile"),children:(0,t.jsxs)("a",{children:[(0,t.jsx)("div",{className:i.thumbnailWrapper,children:(0,t.jsx)(g.Z,{id:e.id,name:e.name})}),r&&(0,t.jsx)("div",{className:i.activityWrapper,children:(0,t.jsx)(v.Z,O({},r))}),(0,t.jsx)("p",{className:i.username,children:e.name})]})})})},k=r(2611),P=r(465),Z=function(e){var n=(0,i.useState)("auto"),r=n[0],a=n[1],o=!1===(0,P.SV)().startsWith(window.location.protocol+"//"+window.location.hostname)?(0,P.p9)((0,P.SV)()+"/Feeds/GetUserFeed"):(0,P.SV)()+"/Feeds/GetUserFeed";return(0,t.jsx)("div",{children:(0,t.jsx)("iframe",{id:"homepage-iframe-feed",height:"100%",scrolling:"no",style:{width:"100%",height:r,overflow:"hidden"},src:o,onLoad:function(){k.k.info("feed","feed iframe loaded");var e=document.getElementById("homepage-iframe-feed").contentWindow.document,n=e.body,r=e.createElement("link");r.setAttribute("href","https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&amp;display=swap"),r.setAttribute("rel","stylesheet"),e.body.appendChild(r);var t=e.createElement("style");t.innerText='\na.list-header {\n  display: inline-block;\n}\nimg.header-thumb, img.avatar-card-image {\n  height: 85px;\n  width: auto;\n  display: inline-block;\n}\nul.vlist.feeds {\n  padding: 0;\n  list-style: none;\n}\ndiv.list-body {\n  display: inline-block;\n  margin-left: 10px;\n  max-width: calc(100% - 100px);\n}\nhtml,body {\n  font-family: "Source Sans Pro", serif;\n}\np {\n  padding: 0;\n  margin: 0;\n}\np.feedtext {\n  padding: 10px 0;\n}\nspan.xsmall {\n  color: #777;\n  font-size: 12px;\n}\na {\n  color: #00a2ff;\n  text-decoration: none;\n}\na:visited {\n  color: #00a2ff;\n}\nli.list-item {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #c3c3c3;\n  padding-top: 10px;\n}\n',e.body.appendChild(t);var i=n.scrollHeight+10;a(i+"px")}})})};function W(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var _=(0,a.QM)({container:{maxWidth:"1200px!Important"},headshotWrapper:{borderRadius:"100%",overflow:"hidden",background:"white",border:"1px solid #c3c3c3",boxShadow:"0 -5px 20px rgba(25,25,25,0.15)"},helloMessage:{fontWeight:600,fontSize:"40px","@media(min-width: 980px)":{marginTop:"60px",marginLeft:"20px"}},subHeader:{fontWeight:300,fontSize:"24px",color:"#4a4a4a"},card:{boxShadow:"0 -5px 20px rgba(25,25,25,0.15)"},friendRow:{flexFlow:"row",marginRight:"-7px",overflow:"auto"},mainBody:{background:"#e3e3e3"}}),T=function(e){var n=_(),r=(0,p.Z)(),a=d.Z.useContainer(),m=S.useContainer(),x=m.friends,g=m.setFriends,v=(m.friendStatus,(0,i.useState)(null)),y=v[0],b=v[1],w=(0,i.useState)({}),j=w[0],N=w[1];return(0,i.useEffect)((function(){a.userId&&(0,s.$J)({userId:a.userId}).then((function(e){e.length>0&&g(e)}))}),[a.userId]),(0,i.useEffect)((function(){(0,l.Xy)({gameSortsContext:"HomeSorts"}).then((function(e){var n=[],r=[],t=[],i=!0,a=!1,o=void 0;try{for(var s,d=function(e,i){var a=i.value;r.push(a),n.push((0,l.ZN)({sortToken:a.token,limit:100,keyword:""}).then((function(e){a.games=e.games,e.games.forEach((function(e){return t.push(e.universeId)}))})))},u=e.sorts[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)d(0,s)}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}Promise.all(n).then((function(){b(r),(0,c.$U)({universeIds:t,size:"150x150"}).then((function(e){var n={},r=!0,t=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;n[s.targetId]=s.imageUrl}}catch(f){t=!0,i=f}finally{try{r||null==o.return||o.return()}finally{if(t)throw i}}N(n)}))}))}))}),[]),a.userId?(0,t.jsx)("div",{className:"container "+n.container,children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"d-none d-lg-flex col-2",children:(0,t.jsx)(u.Z,{context:"dashboard-left"})}),(0,t.jsxs)("div",{className:"col-12 col-lg-8 "+n.mainBody,children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-3",children:(0,t.jsx)("div",{className:n.headshotWrapper,children:(0,t.jsx)(h.Z,{id:a.userId,name:a.username})})}),(0,t.jsx)("div",{className:"col-9",children:(0,t.jsxs)("h3",{className:n.helloMessage,children:["Hello, ",a.username,"!"]})})]}),x&&(0,t.jsx)("div",{className:"row mt-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsxs)("h3",{className:n.subHeader,children:["Friends (",x.length,")"]}),(0,t.jsx)("div",{className:"card pt-3 pb-3 ps-3 pe-2 "+n.card,children:(0,t.jsx)("div",{className:"row "+n.friendRow,children:x.map((function(e){return(0,t.jsx)(A,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){W(e,n,r[n])}))}return e}({},e),e.id)}))})})]})}),y&&y.map((function(e){return(0,t.jsx)(f.Z,{title:e.displayName,games:e.games,icons:j},e.token)})),(0,o.Z)("userFeedEnabled",!1)?(0,t.jsx)("div",{className:"row mt-4",children:(0,t.jsx)("div",{className:"col-12 col-md-6",children:(0,t.jsx)("div",{className:r.card,children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("h3",{className:n.subHeader,children:"MY FEED"}),(0,t.jsx)(Z,{})]})})})}):null]}),(0,t.jsx)("div",{className:"d-none d-lg-flex col-2",children:(0,t.jsx)(u.Z,{context:"dashboard-right"})})]})}):null},C=r(8660),F=!0;function M(){return(0,t.jsx)(C.Z,{children:(0,t.jsx)(S.Provider,{children:(0,t.jsx)(T,{})})})}},5544:function(e,n,r){"use strict";r.d(n,{M:function(){return i}});var t=r(465),i=function(e){var n=e.userIds;return(0,t.ZP)("POST",(0,t.mn)("presence","/v1/presence/users"),{userIds:n}).then((function(e){return e.data.userPresences}))}}},function(e){e.O(0,[553,269,774,888,179],(function(){return n=76,e(e.s=n);var n}));var n=e.O();_N_E=n}]);